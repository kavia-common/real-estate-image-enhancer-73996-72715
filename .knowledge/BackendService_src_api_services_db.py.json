{"is_source_file": true, "format": "Python", "description": "This file defines an in-memory database class `InMemoryDB` for managing users, images, edits, subscriptions, and usage data within a backend service. It appears to be a mock or temporary implementation used for testing or development purposes.", "external_files": [], "external_methods": ["uuid.uuid4", "datetime.utcnow", "datetime.utcnow().isoformat"], "published": ["db"], "classes": [{"name": "InMemoryDB", "description": "A temporary in-memory store simulating database interactions for users, images, edits, subscriptions, and usage tracking."}], "methods": [{"name": "Dict[str,Any] create_user(self, email: str, hashed_password: str)", "description": "Creates a new user record with email and hashed password, assigns a unique UUID, and records creation time.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Optional[Dict[str,Any]] get_user_by_email(self, email: str)", "description": "Retrieves a user record by email, case-insensitive.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Optional[Dict[str,Any]] get_user(self, user_id: str)", "description": "Fetches a user record by user ID.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Dict[str,Any] create_image(self, user_id: str, filename: str, path: str, mime: str)", "description": "Creates a new image record associated with a user, with filename, path, and MIME type.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "List[Dict[str,Any]] list_images(self, user_id: str)", "description": "Lists all images associated with a specific user.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Optional[Dict[str,Any]] get_image(self, user_id: str, image_id: str)", "description": "Retrieves an image record by image ID for a specific user.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Dict[str,Any] create_edit(self, user_id: str, image_id: str, prompt: str)", "description": "Creates a new edit record linked to a user and an image, with a prompt.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Optional[Dict[str,Any]] get_edit(self, user_id: str, edit_id: str)", "description": "Retrieves an edit record by edit ID for a specific user.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Optional[Dict[str,Any]] update_edit(self, edit_id: str, **fields)", "description": "Updates fields of an existing edit record, refreshing the 'updated_at' timestamp.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "List[Dict[str,Any]] list_edits_for_image(self, user_id: str, image_id: str)", "description": "Lists all edits associated with a specific image for a user.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Dict[str,Any] set_subscription(self, user_id: str, plan: str, status: str)", "description": "Sets or updates a subscription plan and status for a user.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Optional[Dict[str,Any]] get_subscription(self, user_id: str)", "description": "Retrieves subscription information for a user.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "int increment_usage(self, user_id: str, metric: str, amount: int = 1)", "description": "Increments a usage metric for a user and returns the new value.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "Dict[str,int] get_usage(self, user_id: str)", "description": "Retrieves the current usage metrics for a user.", "scope": "InMemoryDB", "scopeKind": "class"}, {"name": "__init__(self)", "scope": "InMemoryDB", "scopeKind": "class", "description": "unavailable"}], "calls": ["uuid.uuid4", "datetime.utcnow", "datetime.utcnow().isoformat"], "search-terms": ["InMemoryDB", "db", "create_image", "create_edit", "subscription", "usage"], "state": 2, "file_id": 9, "knowledge_revision": 20, "git_revision": "", "ctags": [{"_type": "tag", "name": "InMemoryDB", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^class InMemoryDB:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "create_edit", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def create_edit(self, user_id: str, image_id: str, prompt: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, user_id: str, image_id: str, prompt: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "create_image", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def create_image(self, user_id: str, filename: str, path: str, mime: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, user_id: str, filename: str, path: str, mime: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def create_user(self, email: str, hashed_password: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, email: str, hashed_password: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^db = InMemoryDB()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_edit", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def get_edit(self, user_id: str, edit_id: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, user_id: str, edit_id: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "get_image", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def get_image(self, user_id: str, image_id: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, user_id: str, image_id: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "get_subscription", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def get_subscription(self, user_id: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, user_id: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "get_usage", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def get_usage(self, user_id: str) -> Dict[str, int]:$/", "language": "Python", "typeref": "typename:Dict[str,int]", "kind": "member", "signature": "(self, user_id: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "get_user", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def get_user(self, user_id: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, user_id: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "get_user_by_email", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def get_user_by_email(self, email: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, email: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "increment_usage", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def increment_usage(self, user_id: str, metric: str, amount: int = 1) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "member", "signature": "(self, user_id: str, metric: str, amount: int = 1)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "list_edits_for_image", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def list_edits_for_image(self, user_id: str, image_id: str) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, user_id: str, image_id: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "list_images", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def list_images(self, user_id: str) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, user_id: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "set_subscription", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def set_subscription(self, user_id: str, plan: str, status: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, user_id: str, plan: str, status: str)", "scope": "InMemoryDB", "scopeKind": "class"}, {"_type": "tag", "name": "update_edit", "path": "/home/kavia/workspace/code-generation/real-estate-image-enhancer-73996-72715/BackendService/src/api/services/db.py", "pattern": "/^    def update_edit(self, edit_id: str, **fields) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, edit_id: str, **fields)", "scope": "InMemoryDB", "scopeKind": "class"}], "hash": "e112516c388e7141440da258b017eac0", "format-version": 4, "code-base-name": "BackendService", "filename": "BackendService/src/api/services/db.py", "fields": [{"name": "db = InMemoryDB()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"20": ""}]}